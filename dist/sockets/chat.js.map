{"version":3,"sources":["../../source/sockets/chat.js"],"names":["chat","io","socket","onlineUsers","channels","on","username","id","console","log","emit","data","channel","push","sender","message","to","newChannel","join","messages"],"mappings":";;;;;;;AAAA;AAEA,MAAMA,IAAI,GAAG,SAAPA,IAAO,CAASC,EAAT,EAAaC,MAAb,EAAqBC,WAArB,EAAkCC,QAAlC,EAA4C;AACrD;AACAF,EAAAA,MAAM,CAACG,EAAP,CAAU,UAAV,EAAuBC,QAAD,IAAc;AAChCH,IAAAA,WAAW,CAACG,QAAD,CAAX,GAAwBJ,MAAM,CAACK,EAA/B;AACAL,IAAAA,MAAM,CAAC,UAAD,CAAN,GAAqBI,QAArB;AACAE,IAAAA,OAAO,CAACC,GAAR,WAAeH,QAAf;AACAL,IAAAA,EAAE,CAACS,IAAH,CAAQ,UAAR,EAAoBJ,QAApB;AACH,GALD,EAFqD,CASrD;;AACAJ,EAAAA,MAAM,CAACG,EAAP,CAAU,aAAV,EAA0BM,IAAD,IAAU;AAC/BH,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,IAA3B;AACAP,IAAAA,QAAQ,CAACO,IAAI,CAACC,OAAN,CAAR,CAAuBC,IAAvB,CAA4B;AAAEC,MAAAA,MAAM,EAAEH,IAAI,CAACG,MAAf;AAAuBC,MAAAA,OAAO,EAAEJ,IAAI,CAACI;AAArC,KAA5B;AACAd,IAAAA,EAAE,CAACe,EAAH,CAAML,IAAI,CAACC,OAAX,EAAoBF,IAApB,CAAyB,aAAzB,EAAwCC,IAAxC;AACH,GAJD;AAMAT,EAAAA,MAAM,CAACG,EAAP,CAAU,kBAAV,EAA8B,MAAM;AAChC;AACAH,IAAAA,MAAM,CAACQ,IAAP,CAAY,kBAAZ,EAAgCP,WAAhC;AACH,GAHD;AAKAD,EAAAA,MAAM,CAACG,EAAP,CAAU,aAAV,EAA0BY,UAAD,IAAgB;AACrCT,IAAAA,OAAO,CAACC,GAAR;AACAL,IAAAA,QAAQ,CAACa,UAAD,CAAR,GAAuB,EAAvB;AACAf,IAAAA,MAAM,CAACgB,IAAP,CAAYD,UAAZ;AACAhB,IAAAA,EAAE,CAACS,IAAH,CAAQ,aAAR,EAAuBO,UAAvB;AACAf,IAAAA,MAAM,CAACQ,IAAP,CAAY,sBAAZ,EAAoC;AAChCE,MAAAA,OAAO,EAAEK,UADuB;AAEhCE,MAAAA,QAAQ,EAAEf,QAAQ,CAACa,UAAD;AAFc,KAApC;AAIH,GATD;AAWAf,EAAAA,MAAM,CAACG,EAAP,CAAU,sBAAV,EAAmCY,UAAD,IAAgB;AAC9CT,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCQ,UAApC;AACAf,IAAAA,MAAM,CAACgB,IAAP,CAAYD,UAAZ;AACAf,IAAAA,MAAM,CAACQ,IAAP,CAAY,sBAAZ,EAAoC;AAChCE,MAAAA,OAAO,EAAEK,UADuB;AAEhCE,MAAAA,QAAQ,EAAEf,QAAQ,CAACa,UAAD;AAFc,KAApC;AAIH,GAPD;AASAf,EAAAA,MAAM,CAACG,EAAP,CAAU,YAAV,EAAwB,MAAM;AAC1B,WAAOF,WAAW,CAACD,MAAM,CAACI,QAAR,CAAlB;AACAL,IAAAA,EAAE,CAACS,IAAH,CAAQ,eAAR,EAAyBP,WAAzB;AACH,GAHD;AAIH,CA7CD;;eA+CeH,I","sourcesContent":["// chat.js\n\nconst chat = function(io, socket, onlineUsers, channels) {\n    // Listen for new users\n    socket.on('new user', (username) => {\n        onlineUsers[username] = socket.id\n        socket['username'] = username\n        console.log(`${username} has joined the chat! âœ‹`)\n        io.emit('new user', username)\n    })\n\n    // Listen for new messages\n    socket.on('new message', (data) => {\n        console.log(\"New message\", data)\n        channels[data.channel].push({ sender: data.sender, message: data.message })\n        io.to(data.channel).emit('new message', data);\n    })\n\n    socket.on('get online users', () => {\n        // send online users\n        socket.emit('get online users', onlineUsers)\n    })\n\n    socket.on('new channel', (newChannel) => {\n        console.log()\n        channels[newChannel] = []\n        socket.join(newChannel)\n        io.emit('new channel', newChannel)\n        socket.emit('user changed channel', {\n            channel: newChannel,\n            messages: channels[newChannel]\n        })\n    })\n\n    socket.on('user changed channel', (newChannel) => {\n        console.log('user changed channel', newChannel)\n        socket.join(newChannel)\n        socket.emit('user changed channel', {\n            channel: newChannel,\n            messages: channels[newChannel]\n        })\n    })\n\n    socket.on('disconnect', () => {\n        delete onlineUsers[socket.username]\n        io.emit('user has left', onlineUsers)\n    })\n}\n\nexport default chat"],"file":"chat.js"}